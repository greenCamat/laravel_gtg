/*
 * jQuery Form Plugin
 * version: 3.02 (07-MAR-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *    http://www.opensource.org/licenses/mit-license.php
 *    http://www.gnu.org/licenses/gpl.html
 */
(function(a){var b={};b.fileapi=a("<input type='file'/>").get(0).files!==undefined;b.formdata=window.FormData!==undefined;a.fn.ajaxSubmit=function(j){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var l,w,m,i=this;if(typeof j=="function"){j={success:j}}l=this.attr("method");w=this.attr("action");m=(typeof w==="string")?a.trim(w):"";m=m||window.location.href||"";if(m){m=(m.match(/^([^#]+)/)||[])[1]}j=a.extend(true,{url:m,success:a.ajaxSettings.success,type:l||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},j);var g={};this.trigger("form-pre-serialize",[this,j,g]);if(g.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(j.beforeSerialize&&j.beforeSerialize(this,j)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var p=j.traditional;if(p===undefined){p=a.ajaxSettings.traditional}var f,y=this.formToArray(j.semantic);if(j.data){j.extraData=j.data;f=a.param(j.data,p)}if(j.beforeSubmit&&j.beforeSubmit(y,this,j)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[y,this,j,g]);if(g.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var s=a.param(y,p);if(f){s=(s?(s+"&"+f):f)}if(j.type.toUpperCase()=="GET"){j.url+=(j.url.indexOf("?")>=0?"&":"?")+s;j.data=null}else{j.data=s}var t=[];if(j.resetForm){t.push(function(){i.resetForm()})}if(j.clearForm){t.push(function(){i.clearForm(j.includeHidden)})}if(!j.dataType&&j.target){var n=j.success||function(){};t.push(function(A){var q=j.replaceTarget?"replaceWith":"html";a(j.target)[q](A).each(n,arguments)})}else{if(j.success){t.push(j.success)}}j.success=function(A,C,q){var B=j.context||j;for(var D=0,E=t.length;D<E;D++){t[D].apply(B,[A,C,q||i,i])}};var o=a("input:file:enabled[value]",this);var x=o.length>0;var u="multipart/form-data";var h=(i.attr("enctype")==u||i.attr("encoding")==u);var r=b.fileapi&&b.formdata;d("fileAPI :"+r);var z=(x||h)&&!r;if(j.iframe!==false&&(j.iframe||z)){if(j.closeKeepAlive){a.get(j.closeKeepAlive,function(){k(y)})}else{k(y)}}else{if((x||h)&&r){v(y)}else{a.ajax(j)}}this.trigger("form-submit-notify",[this,j]);return this;function v(B){var A=new FormData();for(var E=0;E<B.length;E++){A.append(B[E].name,B[E].value)}if(j.extraData){for(var D in j.extraData){if(j.extraData.hasOwnProperty(D)){A.append(D,j.extraData[D])}}}j.data=null;var q=a.extend(true,{},a.ajaxSettings,j,{contentType:false,processData:false,cache:false,type:"POST"});if(j.uploadProgress){q.xhr=function(){var F=jQuery.ajaxSettings.xhr();if(F.upload){F.upload.onprogress=function(G){var H=0;if(G.lengthComputable){H=parseInt((G.position/G.total)*100,10)}j.uploadProgress(G,G.position,G.total,H)}}return F}}q.data=null;var C=q.beforeSend;q.beforeSend=function(G,F){F.data=A;if(C){C.call(F,G,j)}};a.ajax(q)}function k(U){var W=i[0],V,R,M,ab,q,H,O,D,J,S,C,Y;var T=!!a.fn.prop;if(U){if(T){for(R=0;R<U.length;R++){V=a(W[U[R].name]);V.prop("disabled",false)}}else{for(R=0;R<U.length;R++){V=a(W[U[R].name]);V.removeAttr("disabled")}}}if(a(":input[name=submit],:input[id=submit]",W).length){alert('Error: Form elements must not have name or id of "submit".');return}M=a.extend(true,{},a.ajaxSettings,j);M.context=M.context||M;q="jqFormIO"+(new Date().getTime());if(M.iframeTarget){H=a(M.iframeTarget);S=H.attr("name");if(!S){H.attr("name",q)}else{q=S}}else{H=a('<iframe name="'+q+'" src="'+M.iframeSrc+'" />');H.css({position:"absolute",top:"-1000px",left:"-1000px"})}O=H[0];D={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(ad){var ac=(ad==="timeout"?"timeout":"aborted");d("aborting upload... "+ac);this.aborted=1;H.attr("src",M.iframeSrc);D.error=ac;if(M.error){M.error.call(M.context,D,ac,ad)}if(ab){a.event.trigger("ajaxError",[D,M,ac])}if(M.complete){M.complete.call(M.context,D,ac)}}};ab=M.global;if(ab&&0===a.active++){a.event.trigger("ajaxStart")}if(ab){a.event.trigger("ajaxSend",[D,M])}if(M.beforeSend&&M.beforeSend.call(M.context,D,M)===false){if(M.global){a.active--}return}if(D.aborted){return}J=W.clk;if(J){S=J.name;if(S&&!J.disabled){M.extraData=M.extraData||{};M.extraData[S]=J.value;if(J.type=="image"){M.extraData[S+".x"]=W.clk_x;M.extraData[S+".y"]=W.clk_y}}}var N=1;var G=2;function I(ac){var ad=ac.contentWindow?ac.contentWindow.document:ac.contentDocument?ac.contentDocument:ac.document;return ad}var P=a("meta[name=csrf-token]").attr("content");var Q=a("meta[name=csrf-param]").attr("content");if(Q&&P){M.extraData=M.extraData||{};M.extraData[Q]=P}function E(){var af=i.attr("target"),ae=i.attr("action");W.setAttribute("target",q);if(!l){W.setAttribute("method","POST")}if(ae!=M.url){W.setAttribute("action",M.url)}if(!M.skipEncodingOverride&&(!l||/post/i.test(l))){i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(M.timeout){Y=setTimeout(function(){C=true;L(N)},M.timeout)}function ag(){try{var ai=I(O).readyState;d("state = "+ai);if(ai&&ai.toLowerCase()=="uninitialized"){setTimeout(ag,50)}}catch(ah){d("Server abort: ",ah," (",ah.name,")");L(G);if(Y){clearTimeout(Y)}Y=undefined}}var ac=[];try{if(M.extraData){for(var ad in M.extraData){if(M.extraData.hasOwnProperty(ad)){ac.push(a('<input type="hidden" name="'+ad+'">').attr("value",M.extraData[ad]).appendTo(W)[0])}}}if(!M.iframeTarget){H.appendTo("body");if(O.attachEvent){O.attachEvent("onload",L)}else{O.addEventListener("load",L,false)}}setTimeout(ag,15);W.submit()}finally{W.setAttribute("action",ae);if(af){W.setAttribute("target",af)}else{i.removeAttr("target")}a(ac).remove()}}if(M.forceSync){E()}else{setTimeout(E,10)}var F,A,aa=50,K;function L(ah){if(D.aborted||K){return}try{A=I(O)}catch(al){d("cannot access response document: ",al);ah=G}if(ah===N&&D){D.abort("timeout");return}else{if(ah==G&&D){D.abort("server abort");return}}if(!A||A.location.href==M.iframeSrc){if(!C){return}}if(O.detachEvent){O.detachEvent("onload",L)}else{O.removeEventListener("load",L,false)}var aj="success",ac;try{if(C){throw"timeout"}var ak=M.dataType=="xml"||A.XMLDocument||a.isXMLDoc(A);d("isXml="+ak);if(!ak&&window.opera&&(A.body===null||!A.body.innerHTML)){if(--aa){d("requeing onLoad callback, DOM not available");setTimeout(L,250);return}}var am=A.body?A.body:A.documentElement;D.responseText=am?am.innerHTML:null;D.responseXML=A.XMLDocument?A.XMLDocument:A;if(ak){M.dataType="xml"}D.getResponseHeader=function(ao){var an={"content-type":M.dataType};return an[ao]};if(am){D.status=Number(am.getAttribute("status"))||D.status;D.statusText=am.getAttribute("statusText")||D.statusText}var af=(M.dataType||"").toLowerCase();var ag=/(json|script|text)/.test(af);if(ag||M.textarea){var ai=A.getElementsByTagName("textarea")[0];if(ai){D.responseText=ai.value;D.status=Number(ai.getAttribute("status"))||D.status;D.statusText=ai.getAttribute("statusText")||D.statusText}else{if(ag){var ae=A.getElementsByTagName("pre")[0];var ad=A.getElementsByTagName("body")[0];if(ae){D.responseText=ae.textContent?ae.textContent:ae.innerText}else{if(ad){D.responseText=ad.textContent?ad.textContent:ad.innerText}}}}}else{if(af=="xml"&&!D.responseXML&&D.responseText){D.responseXML=Z(D.responseText)}}try{F=B(D,af,M)}catch(ah){aj="parsererror";D.error=ac=(ah||aj)}}catch(ah){d("error caught: ",ah);aj="error";D.error=ac=(ah||aj)}if(D.aborted){d("upload aborted");aj=null}if(D.status){aj=(D.status>=200&&D.status<300||D.status===304)?"success":"error"}if(aj==="success"){if(M.success){M.success.call(M.context,F,"success",D)}if(ab){a.event.trigger("ajaxSuccess",[D,M])}}else{if(aj){if(ac===undefined){ac=D.statusText}if(M.error){M.error.call(M.context,D,aj,ac)}if(ab){a.event.trigger("ajaxError",[D,M,ac])}}}if(ab){a.event.trigger("ajaxComplete",[D,M])}if(ab&&!--a.active){a.event.trigger("ajaxStop")}if(M.complete){M.complete.call(M.context,D,aj)}K=true;if(M.timeout){clearTimeout(Y)}setTimeout(function(){if(!M.iframeTarget){H.remove()}D.responseXML=null},100)}var Z=a.parseXML||function(ad,ac){if(window.ActiveXObject){ac=new ActiveXObject("Microsoft.XMLDOM");ac.async="false";ac.loadXML(ad)}else{ac=(new DOMParser()).parseFromString(ad,"text/xml")}return(ac&&ac.documentElement&&ac.documentElement.nodeName!="parsererror")?ac:null};var X=a.parseJSON||function(ac){return window["eval"]("("+ac+")")};var B=function(ac,ag,ad){var ah=ac.getResponseHeader("content-type")||"",ae=ag==="xml"||!ag&&ah.indexOf("xml")>=0,af=ae?ac.responseXML:ac.responseText;if(ae&&af.documentElement.nodeName==="parsererror"){if(a.error){a.error("parsererror")}}if(ad&&ad.dataFilter){af=ad.dataFilter(af,ag)}if(typeof af==="string"){if(ag==="json"||!ag&&ah.indexOf("json")>=0){af=X(af)}else{if(ag==="script"||!ag&&ah.indexOf("javascript")>=0){a.globalEval(af)}}}return af}}};a.fn.ajaxForm=function(f){f=f||{};f.delegation=f.delegation&&a.isFunction(a.fn.on);if(!f.delegation&&this.length===0){var g={s:this.selector,c:this.context};if(!a.isReady&&g.s){d("DOM not ready, queuing ajaxForm");a(function(){a(g.s,g.c).ajaxForm(f)});return this}d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}if(f.delegation){a(document).off("submit.form-plugin",this.selector,c).off("click.form-plugin",this.selector,e).on("submit.form-plugin",this.selector,f,c).on("click.form-plugin",this.selector,f,e);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",f,c).bind("click.form-plugin",f,e)};function c(f){var g=f.data;if(!f.isDefaultPrevented()){f.preventDefault();a(this).ajaxSubmit(g)}}function e(h){var k=h.target;var i=a(k);if(!(i.is(":submit,input:image"))){var g=i.closest(":submit");if(g.length===0){return}k=g[0]}var j=this;j.clk=k;if(k.type=="image"){if(h.offsetX!==undefined){j.clk_x=h.offsetX;j.clk_y=h.offsetY}else{if(typeof a.fn.offset=="function"){var f=i.offset();j.clk_x=h.pageX-f.left;j.clk_y=h.pageY-f.top}else{j.clk_x=h.pageX-k.offsetLeft;j.clk_y=h.pageY-k.offsetTop}}}setTimeout(function(){j.clk=j.clk_x=j.clk_y=null},100)}a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(m){var g=[];if(this.length===0){return g}var o=this[0];var f=m?o.getElementsByTagName("*"):o.elements;if(!f){return g}var s,r,t,q,w,l,h;for(s=0,l=f.length;s<l;s++){w=f[s];t=w.name;if(!t){continue}if(m&&o.clk&&w.type=="image"){if(!w.disabled&&o.clk==w){g.push({name:t,value:a(w).val(),type:w.type});g.push({name:t+".x",value:o.clk_x},{name:t+".y",value:o.clk_y})}continue}q=a.fieldValue(w,true);if(q&&q.constructor==Array){for(r=0,h=q.length;r<h;r++){g.push({name:t,value:q[r]})}}else{if(b.fileapi&&w.type=="file"&&!w.disabled){var u=w.files;for(r=0;r<u.length;r++){g.push({name:t,value:u[r],type:w.type})}}else{if(q!==null&&typeof q!="undefined"){g.push({name:t,value:q,type:w.type})}}}}if(!m&&o.clk){var k=a(o.clk),p=k[0];t=p.name;if(t&&!p.disabled&&p.type=="image"){g.push({name:t,value:k.val()});g.push({name:t+".x",value:o.clk_x},{name:t+".y",value:o.clk_y})}}return g};a.fn.formSerialize=function(f){return a.param(this.formToArray(f))};a.fn.fieldSerialize=function(f){var g=[];this.each(function(){var l=this.name;if(!l){return}var k=a.fieldValue(this,f);if(k&&k.constructor==Array){for(var j=0,h=k.length;j<h;j++){g.push({name:l,value:k[j]})}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k})}}});return a.param(g)};a.fn.fieldValue=function(g){for(var f=[],l=0,k=this.length;l<k;l++){var h=this[l];var j=a.fieldValue(h,g);if(j===null||typeof j=="undefined"||(j.constructor==Array&&!j.length)){continue}if(j.constructor==Array){a.merge(f,j)}else{f.push(j)}}return f};a.fieldValue=function(p,m){var u=p.name,q=p.type,h=p.tagName.toLowerCase();if(m===undefined){m=true}if(m&&(!u||p.disabled||q=="reset"||q=="button"||(q=="checkbox"||q=="radio")&&!p.checked||(q=="submit"||q=="image")&&p.form&&p.form.clk!=p||h=="select"&&p.selectedIndex==-1)){return null}if(h=="select"){var o=p.selectedIndex;if(o<0){return null}var f=[],g=p.options;var j=(q=="select-one");var k=(j?o+1:g.length);for(var s=(j?o:0);s<k;s++){var r=g[s];if(r.selected){var l=r.value;if(!l){l=(r.attributes&&r.attributes.value&&!(r.attributes.value.specified))?r.text:r.value}if(j){return l}f.push(l)}}return f}return a(p).val()};a.fn.clearForm=function(f){return this.each(function(){a("input,select,textarea",this).clearFields(f)})};a.fn.clearFields=a.fn.clearInputs=function(f){var g=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,h=this.tagName.toLowerCase();if(g.test(i)||h=="textarea"||(f&&/hidden/.test(i))){this.value=""}else{if(i=="checkbox"||i=="radio"){this.checked=false}else{if(h=="select"){this.selectedIndex=-1}}}})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};a.fn.enable=function(f){if(f===undefined){f=true}return this.each(function(){this.disabled=!f})};a.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var g=this.type;if(g=="checkbox"||g=="radio"){this.checked=f}else{if(this.tagName.toLowerCase()=="option"){var h=a(this).parent("select");if(f&&h[0]&&h[0].type=="select-one"){h.find("option").selected(false)}this.selected=f}}})};a.fn.ajaxSubmit.debug=false;function d(){if(!a.fn.ajaxSubmit.debug){return}var f="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(f)}else{if(window.opera&&window.opera.postError){window.opera.postError(f)}}}})(jQuery);
